# nmap_polygon_uploader
*** 

Скрипт для переноса геометрии из файла формата shapefile в инструмент «Блокнот картографа» с целью последующего
размещения этой геометрии на народной карте.
<br>
<br>

# Быстрый старт

## Настройте параметры

1. [Получите](https://yandex.ru/dev/disk/poligon/) OAuth-токен Яндекс

2. Переименуйте файл `utils/example.settings.py` --> `settings.py` и указать для следующих переменных ваши данные:

```python
ydex_api_key = "<ВАШ_OAUTH_ТОКЕН>"  # указать ваш OAuth-токен Яндекс
def_shp_data = "/../../geoserver_data.zip"  # указать дефолтный путь сохранения файлов
```

## Установите зависимости

```bash
pip install -r requirements.txt
```

## Запустите программу

```bash
python main.py
```

# Как это работает

После запуска он анализирует архив и записывает в файл `index.json` информацию о внешних (`exterior`) и внутренних (
`interior`) границах геометрии, конвертируя их в LineString.
В разделе «Народная карта» на вашем Яндекс Диске создаётся папка с названием текущей даты. В эту папку автоматически
загружается файл `index.json`. После завершения загрузки файлы удаляются. Необходимо обновить страницу редактора и
выбрать в блокноте нужный файл с загруженными заметками.

### Примечание

- Если вы никогда раньше не использовали блокнот картографа, то при первом запуске вам нужно будет создать папку в корне
  вашего диска «Приложения/Блокнот картографа Народной карты».
- Если `index.json` в папке Яндекс Диска уже есть, новые данные объединяются со старыми.
- **В данный момент скрипт функционирует только с шейпфайлами, предоставленными ОЦЗК.** Однако его можно адаптировать
  для работы с другими шейпфайлами, если правильно указать параметры в файле `settings.py`.

```python
def_shp_data = "/../../geoserver_data.zip"  # Название архива
def_shp_name = "oopt_wth_detailsPolygon.shp"  # Название файла *shp
```

[![Демо](https://img.youtube.com/vi/kevuY9CZ3Is/sddefault.jpg)](https://www.youtube.com/watch?v=kevuY9CZ3Is)

## Данные

GIS [оцзк.рф](https://карта.оцзк.рф/) помогает найти данные об особо охраняемых природных территориях (ООПТ) в России. С
её помощью можно скачать информацию о таком объекте.

Информация представлена в виде архива с файлами Shapefiles. В архиве содержатся сведения о местоположении, конфигурации
и характеристиках географических объектов. С помощью скрипта `nmap_polygon_uploader` происходит обработка архива и
преобразование данных в формат, который может быть использован в редакторе народной карты.

## Блокнот картографа

Подробнее о приложении и веб версии данного инструменте
можно [прочитать на страницах справки яндекса](https://yandex.ru/support/nmaps/ru/map-blocknot.html) и в
архивном [посте](https://yandex.ru/blog/narod-karta/bloknot-kartografa) клуба народной карты (закрыт).


<br>
<br>